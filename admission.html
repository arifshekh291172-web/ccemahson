<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Online Admission | CCE Mahson</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="css/home.css">
</head>

<body>

  <!-- ================= HEADER ================= -->
  <header class="header">
    <div class="container nav-flex">
      <div class="logo">CCE Mahson</div>

      <nav class="nav" id="nav">
        <a href="index.html">Home</a>
        <a href="courses.html">Courses</a>
        <a href="admission.html" class="active">Admission</a>
        <a href="contact.html">Contact</a>
      </nav>

      <div class="hamburger" onclick="toggleMenu()">â˜°</div>
    </div>
  </header>

  <!-- ================= PAGE TITLE ================= -->
  <section class="container page-title">
    <h1>Online Admission Form</h1>
    <p>Email verification required before admission submission</p>
  </section>

  <!-- ================= ADMISSION FORM ================= -->
  <section class="container">
    <form class="admission-form" onsubmit="return submitAdmission()">

      <div class="form-group">
        <label>Student Name</label>
        <input type="text" id="name" placeholder="Enter full name">
      </div>

      <div class="form-group">
        <label>Mobile Number</label>
        <input type="tel" id="mobile" placeholder="Enter mobile number">
      </div>

      <div class="form-group">
        <label>Email Address</label>
        <input type="email" id="email" placeholder="Enter valid email">
        <button type="button" class="btn outline" onclick="sendOTP()">
          Send OTP
        </button>
      </div>

      <!-- OTP BOX -->
      <div class="form-group" id="otpBox" style="display:none">
        <label>Enter OTP</label>
        <input type="text" id="otpInput" placeholder="6-digit OTP">
        <button type="button" class="btn outline" onclick="verifyOTP()">
          Verify OTP
        </button>
        <p id="otpStatus" style="font-size:13px"></p>
      </div>

      <div class="form-group">
        <label>Select Course</label>
        <select id="course"></select>
      </div>

      <div class="form-group">
        <label>Address</label>
        <textarea id="address" rows="3"></textarea>
      </div>

      <button class="btn" id="submitBtn" disabled>
        Submit Admission
      </button>

    </form>
  </section>

  <!-- ================= FOOTER ================= -->
  <footer class="footer">
    Â© 2025 Center of Computer Education, Mahson
  </footer>

  <script>
    /* ===============================
       LOAD COURSES (ADMIN LIVE)
    ================================ */
    const courseSelect = document.getElementById("course");
    const courses = JSON.parse(localStorage.getItem("courses")) || [];
    courseSelect.innerHTML = `<option value="">Select Course</option>`;
    courses.forEach(c => {
      courseSelect.innerHTML += `<option>${c.title}</option>`;
    });

    /* ===============================
       OTP LOGIC (FRONTEND FLOW)
    ================================ */
    let generatedOTP = "";

    function sendOTP() {
      const email = document.getElementById("email").value.trim();
      if (!email) {
        alert("Enter valid email");
        return;
      }

      generatedOTP = Math.floor(100000 + Math.random() * 900000).toString();

      // ðŸ”¥ REAL BACKEND HERE LATER
      console.log("OTP SENT TO EMAIL:", email, "OTP:", generatedOTP);

      document.getElementById("otpBox").style.display = "block";
      document.getElementById("otpStatus").innerText =
        "OTP sent to your email (check inbox)";

      // Client demo message
      alert("OTP sent to your email (demo)");
    }

    function verifyOTP() {
      const entered = document.getElementById("otpInput").value.trim();

      if (entered === generatedOTP) {
        document.getElementById("otpStatus").innerText =
          "Email verified successfully âœ”";
        document.getElementById("otpStatus").style.color = "green";
        document.getElementById("submitBtn").disabled = false;
      } else {
        document.getElementById("otpStatus").innerText =
          "Invalid OTP";
        document.getElementById("otpStatus").style.color = "red";
      }
    }

    /* ===============================
       SUBMIT ADMISSION
    ================================ */
    function submitAdmission() {
      if (document.getElementById("submitBtn").disabled) {
        alert("Please verify email first");
        return false;
      }

      alert("Admission submitted successfully!");
      return false;
    }

    /* ===============================
       NAV TOGGLE
    ================================ */
    function toggleMenu() {
      document.getElementById("nav").classList.toggle("open");
    }
  </script>

</body>

</html>